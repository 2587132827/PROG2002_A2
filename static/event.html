<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SoulBridge</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<header class="site-header">
  <div class="site-header-left">
    <h1>SoulBridge</h1>
    <p class="mission">Connecting hearts, inspiring change, one event at a time.</p>
  </div>
  <nav>
    <a href="index.html">Home</a>
    <a href="search.html">Search Events</a>
  </nav>
</header>

<main>
  <section class="event-detail" id="event-detail">
  </section>
</main>

<script>
  var detailDiv = document.getElementById('event-detail');
  var urlParams = new URLSearchParams(window.location.search);
  var id = urlParams.get('id');

  fetch('/api/events/' + id)
          .then(function(res){ return res.json(); })
          .then(function(event){
            var start = new Date(event.start_datetime);
            var end = event.end_datetime ? new Date(event.end_datetime) : start;
            var statusLabel = (end < new Date()) ? 'Past' : '';

            detailDiv.innerHTML = `
    ${statusLabel ? '<div class="status-badge">'+statusLabel+'</div>' : ''}
    <img src="${event.image_url || 'https://picsum.photos/800/400?random='+event.id}" alt="${event.name}">
    <h2>${event.name}</h2>
    <p><strong>Purpose:</strong> ${event.purpose}</p>
    <p><strong>Category:</strong> ${event.category}</p>
    <p><strong>Organization:</strong> ${event.organization} - ${event.mission}</p>
    <p><strong>Date:</strong> ${start.toLocaleString()} - ${end.toLocaleString()}</p>
    <p><strong>Location:</strong> ${event.venue_name}, ${event.address}, ${event.city}, ${event.state}</p>
    <p><strong>Goal vs Progress:</strong> $${(event.goal_amount_cents/100).toLocaleString()} vs $${(event.raised_amount_cents/100).toLocaleString()}</p>
    <p>${event.description}</p>
    <button class="register-btn" onclick="alert('This feature is currently under construction')">Register</button>
  `;
          });

</script>
</body>
</html>
